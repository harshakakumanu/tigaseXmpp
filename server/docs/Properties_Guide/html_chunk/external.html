<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;29.&nbsp;--external</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Properties Guide"><link rel="up" href="index.html" title="Tigase Properties Guide"><link rel="prev" href="extcompRepoClass.html" title="Chapter&nbsp;28.&nbsp;--extcomp-repo-class"><link rel="next" href="hardenedMode.html" title="Chapter&nbsp;30.&nbsp;--hardened-mode"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;29.&nbsp;--external</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="extcompRepoClass.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="hardenedMode.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="external"></a>Chapter&nbsp;29.&nbsp;--external</h1></div></div></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net/" target="_top">http://tigase.net/</a>
:Date: 2013-02-09 22:40</p><p><span class="strong"><strong>Default value:</strong></span> <span class="emphasis"><em>none</em></span></p><p><span class="strong"><strong>Example:</strong></span> <code class="literal">--external = muc1.devel.tigase.org:passwd1:connect:5270:devel.tigase.org:accept:lb-class</code></p><p><span class="strong"><strong>Possible values:</strong></span> <span class="emphasis"><em>external domains parameters list.</em></span></p><p><span class="strong"><strong>Description:</strong></span> The property defines parameters for external component connections.</p><p>The component is loaded the same way as all other Tigase components. In your <code class="literal">init.properties</code> file you need to add 2 lines:</p><pre class="programlisting">--comp-name-1 = ext
--comp-class-1 = tigase.server.ext.ComponentProtocol</pre><p>This will load the component with an empty configuration and is practically useless. You have to tell the component on what port to listen to (or on what port to connect to) and external domains list with passwords.</p><p>As a value you have to put comma separated list of external domains settings. Each domain settings consist of a few, colon separated parameters. For example:</p><pre class="programlisting">--external = muc1.devel.tigase.org:passwd1,muc2.devel.tigase.org:passwd2</pre><p>This sets passwords for 2 external domains but does not say anything about port number or about connection. The above list is a simplified syntax. The full syntax looks like this:</p><pre class="programlisting">--external = muc1.devel.tigase.org:passwd1:listen:5270</pre><p>or</p><pre class="programlisting">--external = muc1.devel.tigase.org:passwd1:connect:5270:\
devel.tigase.org:accept:lb-class</pre><p>Meaning of each colon separated part:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">external component <span class="strong"><strong>domain</strong></span>;</li><li class="listitem"><span class="strong"><strong>password</strong></span> for this domain;</li><li class="listitem"><span class="strong"><strong>connection type</strong></span> - <span class="emphasis"><em>listen</em></span> for incoming connections or <span class="emphasis"><em>connect</em></span> for the remote server;</li><li class="listitem"><span class="strong"><strong>port number</strong></span> for the TCP/IP connection (listening on or connecting to);</li><li class="listitem"><span class="strong"><strong>remote hostname address(es)</strong></span> - if the connection type is <span class="emphasis"><em>connect</em></span> then here should the remote hostname address to connect to can be skipped for <span class="emphasis"><em>listen</em></span> connection type; the first item on the list is always the remote domain name, if there are more entries, the rest is just addresses to connect to for this domain separated by semicolon (;)</li><li class="listitem"><span class="strong"><strong>protocol</strong></span> - if the connection type is <span class="emphasis"><em>connect</em></span> then here is protocol to use -  <span class="emphasis"><em>accept</em></span> for XEP-0114, <span class="emphasis"><em>client</em></span> for XEP-0225, possible others in the future, can be skipped for <span class="emphasis"><em>listen</em></span> connection type;</li><li class="listitem"><span class="strong"><strong>lb-class</strong></span> - is a class name for load-balancer plugin. This is used only where there are multiple connections from the external component and you want to spread load among them. More details and examples are in this guide.</li></ol></div><p>Only 2 first parts are mandatory, the rest is optional. The simplified form is used to provide a list of domains:password elements for external components connections.</p><p>The settings on the server side may most likely looks like this:</p><pre class="programlisting">--external=muc1.devel.tigase.org:passwd1:listen:5270,\
muc2.devel.tigase.org:passwd2,muc3.devel.tigase.org:passwd3</pre><p>It specifies 3 domains with passwords and one TCP/IP port to listen to. On the other hand you can specify a configuration which would establish connection to the server:</p><pre class="programlisting">--external = muc1.devel.tigase.org:passwd1:connect:5270:devel.tigase.org:accept</pre><p>We use one of the domains configured on the server side, the same port number and the server address. (Assuming the main server works at devel.tigase.org address).</p><p><span class="strong"><strong>Available since:</strong></span> 4.3.0</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="extcompRepoClass.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="hardenedMode.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;28.&nbsp;--extcomp-repo-class&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;30.&nbsp;--hardened-mode</td></tr></table></div></body></html>