<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Solution</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="mobileoptimizations.html" title="Chapter&nbsp;31.&nbsp;Mobile Optimizations"><link rel="prev" href="mobileoptimizations.html" title="Chapter&nbsp;31.&nbsp;Mobile Optimizations"><link rel="next" href="_queueing_algorithms.html" title="Queueing Algorithms"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Solution</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mobileoptimizations.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;31.&nbsp;Mobile Optimizations</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_queueing_algorithms.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_solution"></a>Solution</h2></div></div></div><p>When mobile client is entering inactive state it notifies server about it by sending following stanza:</p><pre class="programlisting">&lt;iq type="set" id="xx"&gt;
&lt;mobile
  xmlns="http://tigase.org/protocol/mobile#v3"
  enable="true"/&gt;
&lt;/iq&gt;</pre><p>After receiving stanza server starts queueing stanza which should be send to mobile client. Kind of queued stanzas depends on used plugin and in case of <span class="strong"><strong>Mobile v3</strong></span> presence stanzas are queued as well as message stanzas which are Message Carbons. Any other stanza (such as iq or plain messenge) is sent immediately to the client and every stanza from queue is also sent at this time.</p><p>When mobile client is entering active state it notifies server by sending following stanza:</p><pre class="programlisting">&lt;iq type="set" id="xx"&gt;
&lt;mobile
  xmlns="http://tigase.org/protocol/mobile#v3"
  enable="false"/&gt;
&lt;/iq&gt;</pre><p>After receiving stanza server sends all queued stanzas to the client.</p><p>Also all stanzas from queue will be sent if number of stanzas in queue will reach queue size limit. By default this limit is set to 50.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mobileoptimizations.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="mobileoptimizations.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_queueing_algorithms.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;31.&nbsp;Mobile Optimizations&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Queueing Algorithms</td></tr></table></div></body></html>