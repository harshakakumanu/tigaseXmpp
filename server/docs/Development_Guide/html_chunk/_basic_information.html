<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Basic Information</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="index.html" title="Tigase Development Guide"><link rel="prev" href="_tigase_db_schema_explained.html" title="Chapter&nbsp;2.&nbsp;Tigase DB Schema Explained"><link rel="next" href="_connector.html" title="Connector"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Basic Information</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_tigase_db_schema_explained.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_connector.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_basic_information"></a>Chapter&nbsp;3.&nbsp;Basic Information</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_basic_information.html#_tigase_server_elements">Tigase Server Elements</a></span></dt><dd><dl><dt><span class="section"><a href="_basic_information.html#_component">Component</a></span></dt><dt><span class="section"><a href="_basic_information.html#_plug_in">Plug-in</a></span></dt></dl></dd><dt><span class="section"><a href="_connector.html">Connector</a></span></dt><dd><dl><dt><span class="section"><a href="_connector.html#_data_stanzas_packets_data_flow_and_processing">Data, Stanzas, Packets - Data Flow and Processing</a></span></dt></dl></dd></dl></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net/" target="_top">http://tigase.net/</a>
:Date: 2010-04-06 21:22</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_tigase_server_elements"></a>Tigase Server Elements</h2></div></div></div><p>To make it easier to get into the code below are defined basic terms in Tigase server world and there is a brief explanation how the server is designed and implemented. This document also points you to basic interfaces and implementations which can be used as example code reference.</p><p>Logically all server code can be divided into 3 kinds of modules: <span class="strong"><strong>components</strong></span>, <span class="strong"><strong>plug-ins</strong></span> and <span class="strong"><strong>connectors</strong></span>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>Component</strong></span> is the main element of Tigase server is. Component is a bigger piece of code which can have separate address, can receive and send stanzas, can be configured and respond to numerous events. Sample components implemented for Tigase server are: <span class="emphasis"><em>c2s connection manager</em></span>, <span class="emphasis"><em>s2s connection manager</em></span>, <span class="emphasis"><em>session manager</em></span>, <span class="emphasis"><em>XEP-0114 - external component connection manager</em></span>, <span class="emphasis"><em>MUC - multi user char rooms</em></span>.</li><li class="listitem"><span class="strong"><strong>Plug-in</strong></span> is usually small piece of code responsible for processing particular XMPP stanza. It doesn&#8217;t have own address. As a result of stanza processing it can produce new XMPP stanzas. Plug-ins are loaded by <span class="emphasis"><em>session manager</em></span> component or <span class="emphasis"><em>c2s connection manager</em></span> component. Sample plug-ins are: <span class="emphasis"><em>vCard</em></span> stanza processing, <span class="emphasis"><em>jabber:iq:register</em></span> to register new user accounts, <span class="emphasis"><em>presence</em></span> stanza processing, <span class="emphasis"><em>jabber:iq:auth</em></span> for non-sasl authentication and so on&#8230;&#8203;.</li><li class="listitem"><span class="strong"><strong>Connector</strong></span> is a module responsible to for access to data repository like database, LDAP to store and retrieve user data. There are 2 kinds of connectors: authentication connectors and user data connectors. Both of them are independent and can connect to different data sources. Sample connectors are: <span class="emphasis"><em>JDBC database</em></span> connector, <span class="emphasis"><em>XMLDB - embedded database</em></span> connector, <span class="emphasis"><em>Drupal database</em></span> connector, <span class="emphasis"><em>LibreSource database</em></span> connector.</li></ol></div><p>There is API defined for each kind of above modules and all you have to do is implementation of specific interface. Then the module can be loaded to the server based on configuration settings. There are also available abstract classes implementing these interfaces to make development easier.</p><p>Here is a brief list of all interfaces to look at and for more details you have to refer to the guide for specific kind of module.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_component"></a>Component</h3></div></div></div><p>This is list of interfaces to look at when you work on a new component:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>tigase.server.ServerComponent</strong></span> - this is the very basic interface for component. All components must implement it.</li><li class="listitem"><span class="strong"><strong>tigase.server.MessageReceiver</strong></span> - this interface extends <code class="literal">ServerComponent</code> and is required to implement by components which want to receive data packets like <span class="emphasis"><em>session manager</em></span>, <span class="emphasis"><em>c2s connection manager</em></span> and so on&#8230;&#8203;</li><li class="listitem"><span class="strong"><strong>tigase.conf.Configurable</strong></span> - implementing this interface is required to make it configurable. For each object of this type configuration is pushed to it at any time at runtime. This is necessary to make it possible to change configuration at runtime. Implementation should be careful enough to handle this properly.</li><li class="listitem"><span class="strong"><strong>tigase.disco.XMPPService</strong></span> - Objects of which inherit this interface can respond to "ServiceDiscovery" requests.</li><li class="listitem"><span class="strong"><strong>tigase.stats.StatisticsContainer</strong></span> - Objects which inherits this type can return runtime statistics. Any object can collect job statistics and implementing this interface guarantees that statistics will be presented in consisted way to user who wants to see them.</li></ol></div><p>Instead of implementing above interfaces directly I would recommend to extend one of existing abstract classes which take care of the most of "dirty and boring" stuff. Here is a list the most useful abstract classes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara"><span class="strong"><strong>tigase.server.AbstractMessageReceiver</strong></span> - implements 4 basic interfaces:</p><p class="simpara"><code class="literal">ServerComponent</code>, <code class="literal">MessageReceiver</code>, <code class="literal">Configurable</code> and <code class="literal">StatisticsContainer</code>. It also manages internal data queues using own threads which prevents from dead-locks. It offers even-driven data processing which means whenever packet arrives <code class="literal">abstract void processPacket(Packet packet);</code> method is called to process it. You have to implement this abstract method in your component. If your component wants to send a packet (in response to data it received for example) it needs to call</p><pre class="programlisting">boolean addOutPacket(Packet packet)</pre><p class="simpara">method. This is it, I mean basic implementation.</p></li><li class="listitem"><p class="simpara"><span class="strong"><strong>tigase.server.ConnectionManager</strong></span> - this is an extension of <code class="literal">AbstractMessageReceiver</code> abstract class. As its name says this class takes care of all network connection management stuff. If your component needs to send and receive data directly from the network (like c2s connection, s2s connection or external component) you should use this implementation as a basic class. It takes care of all things related to networking, I/O, reconnecting, listening on socket, connecting and so on. If you extend this class you have to expect data coming from to sources: from the <code class="literal">MessageRouter</code> and this is when</p><pre class="programlisting">abstract void processPacket(Packet packet);</pre><p class="simpara">method is called and from network connection and then</p><pre class="programlisting">abstract Queue processSocketData(XMPPIOService serv);</pre><p class="simpara">method is called.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_plug_in"></a>Plug-in</h3></div></div></div><p>All Tigase plugins currently implemented are located in package: tigase.xmpp.impl. You can use this code as a sample code base. There are 3 types of plug-ins and they are defined in interfaces located in <code class="literal">tigase.xmpp</code> package:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>XMPPProcessorIfc</strong></span> - the most important and basic plug-in. This is the most common plug-in type which just processes stanzas in normal mode. It receives packets, processes them on behalf of the user and returns resulting stanzas.</li><li class="listitem"><span class="strong"><strong>XMPPPreprocessorIfc</strong></span> -</li><li class="listitem"><span class="strong"><strong>XMPPPostprocessorIfc</strong></span> -</li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_tigase_db_schema_explained.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_connector.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Tigase DB Schema Explained&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Connector</td></tr></table></div></body></html>