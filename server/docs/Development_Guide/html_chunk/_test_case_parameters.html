<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Test Case Parameters</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="_test_case_parameters_description.html" title="Chapter&nbsp;36.&nbsp;Test Case Parameters Description"><link rel="prev" href="_basic_test_parameters.html" title="Basic Test Parameters"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Test Case Parameters</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_basic_test_parameters.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;36.&nbsp;Test Case Parameters Description</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_test_case_parameters"></a>Test Case Parameters</h2></div></div></div><p>Test parameters which are normally set on per-test case basis and apply only to the test they are set for and all inherited tests. Some of the parameters though are applied only to inherited test cases. Please look in the description below to find more details.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><span class="strong"><strong>-active-connection</strong></span> is a similar parameter to <span class="strong"><strong>-on-one-socket</strong></span> option. If set the suite doesn&#8217;t close the network socket and if the test is run in loop each loop run re-uses the network connection. Unlike in the -on-one-socket mode the whole test is executed on each run including XMPP stream initialization and user authentication. This option is currently not recommended in a normal use. It is useful only to debug the server behavior in very special use cases.</li><li class="listitem"><span class="strong"><strong>-background</strong></span> executes the test in a separate thread in background and immediately returns control to the test suite program without waiting for the test to complete. Default behavior is to execute all tests sequentially and run next test when previous one has been completed. This parameter however allows to run tests concurrently. This a bit similar option to the <span class="strong"><strong>-daemon</strong></span> parameter. The daemon test/task however is ignored completely and results from the daemon are not collected where the background test is a normal test which is run concurrently with another one or possibly many other tests.</li><li class="listitem"><span class="strong"><strong>-daemon</strong></span> creates a task running in background in a separate thread. Such a test runs infinitely as a daemon, it is not recorded in the test report and it&#8217;s result is not calculated. The purpose of such test/task is to work as a helper for other test cases. A good example of such daemon test is message responder - the test which runs under a different user name and waits for messages and responding to the sender.</li><li class="listitem"><span class="strong"><strong>-delay = 1000</strong></span> set the waiting time in milliseconds after the test case is completed. You may use it if you want to introduce short delay between each test cases run in the loop or if you start the helper daemon thread and you have to add the delay to make sure it is ready to work before next real test starts sending requests to the daemon.</li><li class="listitem"><span class="strong"><strong>-expect-type = error</strong></span> sets the type for a packet expected as a response. Some test cases like message sender expects sometimes response with the same type it has sent the packet ('<span class="strong"><strong>chat</strong></span>') but in some other cases when it sends a message to a user who has privacy lists set to block messages the response should be with an error. This way we can use the same test cases for testing different responses scenarios.</li><li class="listitem"><span class="strong"><strong>-loop = 10</strong></span> sets the number of times the test (and all inherited tests) are repeated. You can use a <span class="strong"><strong>$(loop)</strong></span> pseudo-variable to obtain and use the current loop run number. This is useful if you want to run every loop run for a different user name like registering 10 different user accounts. To do this you stick the $(loop) variable to the user name string: <span class="strong"><strong>-user-name = "nick_name_$(loop)"</strong></span>.</li><li class="listitem"><span class="strong"><strong>-loop-delay = 10</strong></span> sets a delay in milliseconds between each individual loop run for the tests which is run multiple times. This is similar parameter to the <span class="strong"><strong>-delay</strong></span> one but the <span class="strong"><strong>-delay</strong></span> option introduces a delay after the whole test (or all loop runs) has been completed. The loop delay options adds waiting time between each run of the looped test.</li><li class="listitem"><span class="strong"><strong>-loop-start = 5</strong></span> sets the loop starting value. It doesn&#8217;t affect number of loop runs in a any way. It only affects the value of the <span class="strong"><strong>$(loop)</strong></span> variable. Let&#8217;s say you want to run a load test for the server with 100k concurrent users and you want to run the test from 3 different machines. To make sure each machine uses distinct user accounts you have to set a different <span class="strong"><strong>-loop-start</strong></span> parameter on each to prevent from overlapping.</li><li class="listitem"><span class="strong"><strong>-messages = 10</strong></span> sets the number of messages to send to the server. This is another way of looping the test. Instead of repeating the whole test with opening network connection, XMPP stream, authentication and so on it causes only to send the message this many times. This parameters is accepted by some test cases only which send messages. For the messages listeners - test cases which is supposed to respond to the messages the number set here specifies how many times the the response must be sent before the test successfully terminates it&#8217;s work.</li><li class="listitem"><span class="strong"><strong>-multi-thread</strong></span> option causes to run the test case and all inherited in all levels test cases in separate threads. Normally the test case where you put the parameter doesn&#8217;t have a test ID (what you put between <span class="emphasis"><em>@</em></span> and <span class="emphasis"><em>:</em></span> characters so it doesn&#8217;t run a test on it&#8217;s own. Instead it contains a series of test cases inside which are then run in a separate thread each. This is a key parameter to run tests for many concurrent users. (Not a load tests though.) For example you can see whether the server behaves correctly when 5 simultaneous modifies their roster. The execution time all inherited tests run in a separate threads is added together and also results from each individual test is calculated and added to the total main test results.</li><li class="listitem"><span class="strong"><strong>-no-record</strong></span> is used for kind of configuration tests (tasks) which are used to prepare the XMPP server or database for later tests. As an example can be creation of the test user account which is later on used for the roster tests. Usually you don&#8217;t want to include such tests in the test report and using this parameter you essentially exclude the test from the report. The test and the result however shows in the command line output so you can still track what is really going on.</li><li class="listitem"><span class="strong"><strong>-on-one-socket</strong></span> is a modifier for a looped test case. Normally when we switch looping on using '<span class="strong"><strong>-loop</strong></span>' parameter the suite resets the state, closes the network socket and runs the test from the very beginning including opening network socket, XMPP stream, authentication and so on. This parameter however changes this behavior. The network socket is not closed when the test run is completed (successfully) and next run executes only the last part of the test omitting the XMPP stream initialization, authentication and all others but last. This is useful when you want to send many messages to the server (although this effect may be accomplished using '<span class="strong"><strong>-messages</strong></span>' parameter as well) or registering many user accounts on the server, unregistering user accounts and any other which might make sense repeating many times.</li><li class="listitem"><span class="strong"><strong>-port = 5223</strong></span> this parameter is similar to the IP address setting and can be also set globally for all tests. Normally however you set it for a selected tests only to check SSL connection. For all other tests default port number is used. Therefore this parameters has been included in this section instead of "Basic test parameters".</li><li class="listitem"><span class="strong"><strong>-repeat-script = 100</strong></span> and <span class="strong"><strong>-repeat-wait = 10</strong></span> are 2 parameters are specific to the common test cases. (The test cases which reads the test input/output data from the pseudo-xml text file. The first parameter is another variation of test looping. It sets how many times the test has to be repeated. It works very much like the <span class="strong"><strong>-on-one-socket</strong></span> parameter. The only difference is that the common test can preserve some internal states between runs and therefore it has more control over the data. The second parameter sers the timeout in milliseconds to wait/delay between each individual test run and it is a very similar parameter to the <span class="strong"><strong>-delay</strong></span> one but it sets a timeout inside the common test instead.</li><li class="listitem"><span class="strong"><strong>-source-file = "dir/path/to/file.cot"</strong></span> is a parameter to set the "common test" script file. The common test is a test cases which depends on the authentication test case and can read data to send and responses to expect from the text file. The "cot" file is a pseudo-xml file with stanzas to send and stanzas to expect. The the test cases compares the received packets with those in the text file and reports the test result. This is usually a more convenient way to write a new test cases than coding them in Java.</li><li class="listitem"><span class="strong"><strong>-time-out-ok</strong></span> is set for a test case when we expect socket timeout as a correct result from the test case. Normally the timeout means that the test failed and there was no response from the server at all or the response was incorrect. For some tests however (like sending a message to the user who is blocking messages through privacy lists) the timeout is the desired correct test result.</li><li class="listitem"><span class="strong"><strong>-to-jid = "<a class="link" href="mailto:user_name@host.name" target="_top">user_name@host.name</a>"</strong></span> sets the destination address for packets sending packets somewhere. As an example is the test case sending &lt;message                     /&gt; packet. You can set the destination address for the packet. Mind, normally every test expects some response for the data sent so make sure the destination end-point will send back the data expected by the test case.</li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_basic_test_parameters.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_test_case_parameters_description.html">Up</a></td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">Basic Test Parameters&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>