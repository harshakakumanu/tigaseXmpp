<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;26.&nbsp;Packet Filtering in Component</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="index.html" title="Tigase Development Guide"><link rel="prev" href="cil6.html" title="Chapter&nbsp;25.&nbsp;Component Implementation - Lesson 6 - Scripting Support"><link rel="next" href="_configuration.html" title="Configuration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;26.&nbsp;Packet Filtering in Component</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="cil6.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_configuration.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="packetfiltering"></a>Chapter&nbsp;26.&nbsp;Packet Filtering in Component</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="packetfiltering.html#_the_packet_filter_api">The Packet Filter API</a></span></dt><dt><span class="section"><a href="_configuration.html">Configuration</a></span></dt></dl></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net/" target="_top">http://tigase.net/</a>
:Date: 2010-04-06 21:22</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_the_packet_filter_api"></a>The Packet Filter API</h2></div></div></div><p>The Tigase server offers an API to filter packets traffic inside every component. You can separately filter incoming and outgoing packets.</p><p>By filtering we understand intercepting a packet and possibly making some changes to the packet or just blocking the packet completely. By blocking we understand stopping from any further processing and just dropping the packet.</p><p>The packet filtering is based on the <a class="link" href="https://svn.tigase.org/reps/tigase-server/trunk/src/main/java/tigase/server/" target="_top">PacketFilterIfc</a> interface. Please have a look in the JavaDoc documentation to this interface for all the details. The main filtering method is <code class="literal">Packet filter(Packet packet);</code> which takes packets as an input, processes it, possibly alerting the packet content (may add or remove some payloads) and returns a <span class="strong"><strong>Packet</strong></span> for further processing. If it returns <span class="strong"><strong>null</strong></span> it means the packet is blocked and no further processing is permitted otherwise it returns a <span class="strong"><strong>Packet</strong></span> object which is either the same object it received as a parameter or a modified copy of the original object.</p><p>Please note, although <span class="strong"><strong>Packet</strong></span> object is not unmodifiable instance it is recommended to not make any changes on the existing object. The same <span class="strong"><strong>Packet</strong></span> might be processed at the same time by other components or threads, therefore modification of the <span class="strong"><strong>Packet</strong></span> may lead to unpredictable results.</p><p>Please refer to an example code in <a class="link" href="https://svn.tigase.org/reps/tigase-server/trunk/src/main/java/tigase/server/filters/" target="_top">PacketCounter</a> which is a very simple filter counting different types of packets. This filter is by default loaded to all components which might be very helpful for assessing traffic shapes on newly deployed installation. You can get counters for all types of packets, where they are generated, where they flow, what component they put the most load on.</p><p>This is because packet filter can also generate and present own statistics which are accessible via normal statistics monitoring mechanisms. To take advantage of the statistics functionality the packet filter has to implement <code class="literal">void getStatistics(StatisticsList list);</code> method. Normally the method can be empty but you can generate and add to the list own statistics from the filter. Please refer to <a class="link" href="https://svn.tigase.org/reps/tigase-server/trunk/src/main/java/tigase/server/filters/" target="_top">PacketCounter</a> for an example implementation code.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cil6.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_configuration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;25.&nbsp;Component Implementation - Lesson 6 - Scripting Support&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Configuration</td></tr></table></div></body></html>