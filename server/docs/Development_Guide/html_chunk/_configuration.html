<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Configuration</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Development Guide"><link rel="up" href="packetfiltering.html" title="Chapter&nbsp;26.&nbsp;Packet Filtering in Component"><link rel="prev" href="packetfiltering.html" title="Chapter&nbsp;26.&nbsp;Packet Filtering in Component"><link rel="next" href="cil8.html" title="Chapter&nbsp;27.&nbsp;Component Implementation - Lesson 8 - Startup Time"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="packetfiltering.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;26.&nbsp;Packet Filtering in Component</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="cil8.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_configuration"></a>Configuration</h2></div></div></div><p>Packet filters are configurable, that is a list of packet filters can be provided in the Tigase server configuration for each component separately and for each traffic direction. This gives you a great flexibility and control over the data flow inside the Tigase server.</p><p>You can, for example load specific packet filters to all connections managers to block specific traffic or specific packet source from sending messages to users on your server. You could also reduce the server overall load by removing certain payload from all packets. Possibilities are endless.</p><p>The default configuration is generated in such a way that each components loads a single packet filter - PacketCounter for each traffic direction:</p><pre class="programlisting">message-router/incoming-filters=tigase.server.filters.PacketCounter
message-router/outgoing-filters=tigase.server.filters.PacketCounter
sess-man/incoming-filters=tigase.server.filters.PacketCounter
sess-man/outgoing-filters=tigase.server.filters.PacketCounter
c2s/incoming-filters=tigase.server.filters.PacketCounter
c2s/outgoing-filters=tigase.server.filters.PacketCounter
s2s/incoming-filters=tigase.server.filters.PacketCounter
s2s/outgoing-filters=tigase.server.filters.PacketCounter
bosh/incoming-filters=tigase.server.filters.PacketCounter
bosh/outgoing-filters=tigase.server.filters.PacketCounter
muc/incoming-filters=tigase.server.filters.PacketCounter
muc/outgoing-filters=tigase.server.filters.PacketCounter</pre><p>Now, let&#8217;s say you have a packet filter implemented in class: <span class="strong"><strong>com.company.SpamBlocker</strong></span>. You want to disable PacketCounter on most of the components leaving it only in the message router component and you want to install SpamBlocker in all connection managers.</p><p>Please note, in case of the connection managers <span class="emphasis"><em>incoming</em></span> and <span class="emphasis"><em>outgoing</em></span> traffic is probably somehow opposite from what you would normally expect.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">'<span class="strong"><strong>incoming</strong></span>' is a traffic which is submitted to a component by message router and has to be further processed. For connection managers this further processing means sending it out to the network.</li><li class="listitem">'<span class="strong"><strong>outgoing</strong></span>' is a traffic which is <span class="emphasis"><em>generated</em></span> by the component and goes out of the component. Such a packet is submitted to message router which then decides where to send it for further processing. For connection managers '<span class="strong"><strong>outgoing</strong></span>' traffic is all the packets just received from the network.</li></ul></div><p>According to above explanation we have to apply the SpamBlocker filter to all <span class="emphasis"><em>outgoing</em></span> traffic in all connection managers. At the second thought you may also decide that it might be actually useful to compare traffic shape between Bosh connections and standard XMPP c2s connections. So let&#8217;s leave packet counters for this components too.</p><p>Here is our new configuration applying SpamBlocker to connection managers and PacketCounter to a few other components:</p><pre class="programlisting">message-router/incoming-filters=tigase.server.filters.PacketCounter
message-router/outgoing-filters=tigase.server.filters.PacketCounter
sess-man/incoming-filters=
sess-man/outgoing-filters=
c2s/incoming-filters=tigase.server.filters.PacketCounter
c2s/outgoing-filters=tigase.server.filters.PacketCounter,com.company.SpamBlocker
s2s/incoming-filters=
s2s/outgoing-filters=com.company.SpamBlocker
bosh/incoming-filters=tigase.server.filters.PacketCounter
bosh/outgoing-filters=tigase.server.filters.PacketCounter,com.company.SpamBlocker
muc/incoming-filters=
muc/outgoing-filters=</pre><p>The simplest way, right now to apply the new configuration is via init.properties file which is in details described in the <span class="emphasis"><em>Admin Guide</em></span>.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="packetfiltering.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="packetfiltering.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="cil8.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;26.&nbsp;Packet Filtering in Component&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;27.&nbsp;Component Implementation - Lesson 8 - Startup Time</td></tr></table></div></body></html>