<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;52.&nbsp;Configuration Changes in the Tigase Server 5.x</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="_server_configuration_5_x.html" title="Chapter&nbsp;51.&nbsp;Server Configuration 5.x"><link rel="next" href="_default_behaviour.html" title="Default Behaviour"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;52.&nbsp;Configuration Changes in the Tigase Server 5.x</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_server_configuration_5_x.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_default_behaviour.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_configuration_changes_in_the_tigase_server_5_x"></a>Chapter&nbsp;52.&nbsp;Configuration Changes in the Tigase Server 5.x</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_configuration_changes_in_the_tigase_server_5_x.html#_reverting_to_the_old_behaviour">Reverting To the Old Behaviour</a></span></dt><dt><span class="section"><a href="_default_behaviour.html">Default Behaviour</a></span></dt><dt><span class="section"><a href="_storing_configuration_in_sql_database.html">Storing Configuration in SQL Database</a></span></dt><dt><span class="section"><a href="_going_further.html">Going Further</a></span></dt><dt><span class="section"><a href="_message_router_implementation_is_configurable_too.html">Message Router Implementation is Configurable Too</a></span></dt></dl></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net" target="_top">http://tigase.net</a>
:Date: 2010-01-06 20:22</p><p>The whole configuration framework for the Tigase server has been redesigned and rewritten. This was done to cleanup all the configuration code and logic and also extend the current functionality and allow for configuration storage in different kinds of repositories - memory, file, database, &#8230;&#8203;</p><p>The title says configuration changes but the version 5.x still follows our policy about backward compatibility so the changes should be rather called extensions.</p><p>There is however one change which can affect a few users. Those who use the server and worked with it&#8217;s configuration remember the mess and confusion related to duality in the server configuration - the init.properties file and tigase.xml file. This is now over.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_reverting_to_the_old_behaviour"></a>Reverting To the Old Behaviour</h2></div></div></div><p>While using the tigase.xml file is still possible and the whole old behaviour can be preserved it is now disabled by default. By default the Tigase server reads only init.properties file with initial settings and stores all the complete configuration in memory only.</p><p>The init.properties works exactly as before and all old parameters are still working exactly as before. The only difference is the lack of the tigase.xml which is not created by default and is not read by default if it is present. The main advantage is that you don&#8217;t have to remove it each time you change something in the init.properties to pick up new settings.</p><p>I will first present how to revert to old behaviour as this might be critical to some existing systems which want to upgrade. This is actually very simple to accomplish. The Tigase server now, offers pluggable repository support. This means that you can easily extend current functionality with a different configuration storage by writing own class which reads and writes configuration parameters.</p><p>By default class tigase.conf.ConfigurationCache is loaded which stores configuration in memory only.</p><p>Please note, the init.properties file is always read if it exists at given location.</p><p>To revert to the old behaviour you just need to pass a parameter to the Tigase server with a class name which is responsible for keeping server parameters in the old XML file. You can do it in two ways:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Add a parameter to init.properties file:</p><pre class="programlisting">--tigase-config-repo-class=tigase.conf.ConfigXMLRepository</pre></li><li class="listitem"><p class="simpara">You can pass a system property to the JVM at the startup time:</p><pre class="programlisting">-Dtigase-config-repo-class=tigase.conf.ConfigXMLRepository</pre></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_server_configuration_5_x.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_default_behaviour.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;51.&nbsp;Server Configuration 5.x&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Default Behaviour</td></tr></table></div></body></html>