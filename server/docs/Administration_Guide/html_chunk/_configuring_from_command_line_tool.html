<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Configuring from command line tool</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_prepare_the_ms_sql_server_database_for_the_tigase_server.html" title="Chapter&nbsp;32.&nbsp;Prepare the MS SQL Server Database for the Tigase Server"><link rel="prev" href="_import_schema.html" title="Import Schema"><link rel="next" href="_tigase_configuration_init_properties.html" title="Tigase configuration - init.properties"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Configuring from command line tool</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_import_schema.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;32.&nbsp;Prepare the MS SQL Server Database for the Tigase Server</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_tigase_configuration_init_properties.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_configuring_from_command_line_tool"></a>Configuring from command line tool</h2></div></div></div><p>Creation of the database and import of schema can be done from command line as well. In order to do that one needs to execute following commands (either from directory where Tigase XMPP Server is installed or paths to the schema need to be adjusted accordingly):</p><pre class="programlisting">sqlcmd -S %servername% -U %root_user% -P %root_pass% -Q "CREATE DATABASE [%database%]"
sqlcmd -S %servername% -U %root_user% -P %root_pass% -Q "CREATE LOGIN [%user%] WITH PASSWORD=N'%password%', DEFAULT_DATABASE=[%database%]"
sqlcmd -S %servername% -U %root_user% -P %root_pass% -d %database% -Q "ALTER AUTHORIZATION ON DATABASE::%database% TO %user%;"
sqlcmd -S %servername% -U %root_user% -P %root_pass% -d %database% -i database\sqlserver-schema-5-1-schema.sql
sqlcmd -S %servername% -U %root_user% -P %root_pass% -d %database% -i database\sqlserver-schema-5-1-sp.sql
sqlcmd -S %servername% -U %root_user% -P %root_pass% -d %database% -i database\sqlserver-schema-5-1-props.sql</pre><p>Above can be automatized with provided script %tigase-server%\scripts\db-create-sqlserver.cmd (note: it needs to be executed from main Tigase XMPP Server directory due to maintain correct paths):</p><pre class="programlisting">$ scripts\db-create-sqlserver.cmd %database_servername% %database_name% %tigase_username% %tigase_password% %root_username% %root_password%</pre><p>If no parameters are provided then defaults are used:</p><pre class="programlisting">%database_servername%=localhost
%database_name%=tigasedb
%tigase_username%=tigase
%tigase_password%=tigase12
%root_username%=root
%root_password%=root</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_import_schema.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_prepare_the_ms_sql_server_database_for_the_tigase_server.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_tigase_configuration_init_properties.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Import Schema&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Tigase configuration - init.properties</td></tr></table></div></body></html>