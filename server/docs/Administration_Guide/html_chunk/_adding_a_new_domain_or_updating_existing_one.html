<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Adding a New Domain or Updating Existing One</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_specification_for_ad_hoc_commands_used_to_manage_virtual_domains.html" title="Chapter&nbsp;65.&nbsp;Specification for ad-hoc Commands Used to Manage Virtual Domains"><link rel="prev" href="_specification_for_ad_hoc_commands_used_to_manage_virtual_domains.html" title="Chapter&nbsp;65.&nbsp;Specification for ad-hoc Commands Used to Manage Virtual Domains"><link rel="next" href="_removing_a_virtual_domain_from_the_server.html" title="Removing a Virtual Domain From the Server"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Adding a New Domain or Updating Existing One</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_specification_for_ad_hoc_commands_used_to_manage_virtual_domains.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;65.&nbsp;Specification for ad-hoc Commands Used to Manage Virtual Domains</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_removing_a_virtual_domain_from_the_server.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_adding_a_new_domain_or_updating_existing_one"></a>Adding a New Domain or Updating Existing One</h2></div></div></div><p>In order to add a new domain or update existing one you have to send an ad-hoc command <span class="strong"><strong>VHOSTS_UPDATE</strong></span> with at least domain name in the command data form. You can also specify whether the domain is enabled or disabled but this is optional. Future releases may allow for setting additional parameters for the domain: maximum number of user accounts for this domain, anonymous login enabled/disabled for the domain, registration via XMPP enabled/disabled for this domain and some more parameters not specified yet.</p><p>The domain add/update command request is of the form:</p><pre class="programlisting">&lt;iq type="set"
    to="vhost-man@existing.domain.com"
    id="aacba"&gt;
  &lt;command xmlns="http://jabber.org/protocol/commands"
           node="VHOSTS_UPDATE"&gt;
    &lt;x xmlns="jabber:x:data" type="submit"&gt;
      &lt;field type="text-single"
             var="VHost"&gt;
        &lt;value&gt;new-virt.domain.com&lt;/value&gt;
      &lt;/field&gt;
      &lt;field type="list-single"
             var="Enabled"&gt;
        &lt;value&gt;true&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;</pre><p>Please note! Character case in the command field variable names does matter.</p><p>Upon successful completion of the command the server sends a response back to the client with information of the existing number of virtual hosts on the server:</p><pre class="programlisting">&lt;iq from="vhost-man@existing.domain.com"
    type="result"
    to="cmd-sender-admin@existing.domain.com"
    id="aacba"&gt;
  &lt;command xmlns="http://jabber.org/protocol/commands"
           status="completed"
           node="VHOSTS_UPDATE"&gt;
    &lt;x xmlns="jabber:x:data" type="result"&gt;
      &lt;field type="fixed" var="Note"&gt;
        &lt;value&gt;Current number of VHosts: 124&lt;/value&gt;
      &lt;/field&gt;
    &lt;/x&gt;
  &lt;/command&gt;
&lt;/iq&gt;</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_specification_for_ad_hoc_commands_used_to_manage_virtual_domains.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_specification_for_ad_hoc_commands_used_to_manage_virtual_domains.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_removing_a_virtual_domain_from_the_server.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;65.&nbsp;Specification for ad-hoc Commands Used to Manage Virtual Domains&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Removing a Virtual Domain From the Server</td></tr></table></div></body></html>