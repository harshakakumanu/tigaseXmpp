<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Tigase Tip: Checking Cluster Connections</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="TipsAndTricks.html" title="Chapter&nbsp;45.&nbsp;Tips and Tricks"><link rel="prev" href="TipsAndTricks.html" title="Chapter&nbsp;45.&nbsp;Tips and Tricks"><link rel="next" href="_tigase_server_version_5_x.html" title="Chapter&nbsp;46.&nbsp;Tigase Server version 5.x"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tigase Tip: Checking Cluster Connections</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="TipsAndTricks.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;45.&nbsp;Tips and Tricks</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_tigase_server_version_5_x.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_tigase_tip_checking_cluster_connections"></a>Tigase Tip: Checking Cluster Connections</h2></div></div></div><p>After setting up clustering one may want to verify that cluster is operational. Right now it can be done in two fold manner - first by checking that there are actuall network connections established between cluster nodes, the next step is to check internal status of the server.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_established_connections"></a>Established connections</h3></div></div></div><p>There are number of ways to check for opened connections, simplest one use command line. (Tigase uses port <span class="emphasis"><em>5277</em></span> for cluster connections)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Linux</li></ul></div><pre class="screen">$ lsof -iTCP:5277 -sTCP:ESTABLISHED -P -n</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Windows</li></ul></div><pre class="screen">C:\WINNT&gt;netstat -anp tcp | find ":5277 "</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_cluster_nodes_connected_using_xmpp"></a>Cluster nodes connected (using XMPP)</h3></div></div></div><p>Verifying clustering connectivity over XMPP protocol requires any XMPP client capable of <a class="link" href="http://xmpp.org/extensions/xep-0030.html" target="_top">XEP-0030: Service Discovery</a>. It&#8217;s essential to remember, that only administrator (a user whose JID is configured as administrative) has access.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_psi_xmpp_client_2"></a>Psi XMPP Client</h4></div></div></div><p>For the purpose of this guide a <a class="link" href="http://psi-im.org/" target="_top">Psi</a> client will be used. After successfully configuring and connecting to account with administrative privileges we need to access <span class="emphasis"><em>Service Discovery</em></span>, either from application menu or from context menu of the particular account account:</p><div class="figure"><a name="d0e5264"></a><p class="title"><b>Figure&nbsp;45.1.&nbsp;Access service discovery</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/monitoring_xmpp_1.png" width="233" alt="roster-discovery"></div></div></div><br class="figure-break"><p>In the <span class="emphasis"><em>Service Discovery</em></span> window we need to find <span class="emphasis"><em>Cluster Connection Manager</em></span> component. After expanding the tree node for the component a list of all cluster nodes will be presented with the current status (either <span class="emphasis"><em>connected</em></span> or <span class="emphasis"><em>disconnected</em></span>). Node column will contain actuall hostname of the cluster node:</p><div class="figure"><a name="d0e5287"></a><p class="title"><b>Figure&nbsp;45.2.&nbsp;List of cluster nodes</b></p><div class="figure-contents"><div class="mediaobject"><img src="./images/monitoring_clustering.png" width="558" alt="discovery-nodes"></div></div></div><br class="figure-break"></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="TipsAndTricks.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="TipsAndTricks.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_tigase_server_version_5_x.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;45.&nbsp;Tips and Tricks&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;46.&nbsp;Tigase Server version 5.x</td></tr></table></div></body></html>