<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Logs</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="_old_way_editing_configuration_file_manually.html" title="Chapter&nbsp;20.&nbsp;Old Way - Editing Configuration File Manually"><link rel="prev" href="_hostnames.html" title="Hostnames"><link rel="next" href="_startup_file_for_tigase_sh_tigase_conf.html" title="Chapter&nbsp;21.&nbsp;Startup File for tigase.sh - tigase.conf"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Logs</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_hostnames.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;20.&nbsp;Old Way - Editing Configuration File Manually</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_startup_file_for_tigase_sh_tigase_conf.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_logs"></a>Logs</h2></div></div></div><p>Logging mechanism is very flexible in Tigase server. You can adjust separate logging level for each single component. You can also direct loggin to many different destinations like console, file, network socket and so on. Unfortunately it also mean it is a bit complex. The general idea however is quite simple so once you understand it it shouldn&#8217;t be difficult for you anymore. This guide however describes logging very briefly. Loot at full configuration documentation for detailed explanation.</p><p>In standard sever configuration you usually want to turn off all logging to console and all warning and more serious notices directed to log file. Let&#8217;s say logs will be written to /var/log/tigase-server.log which shouldn&#8217;t get bigger than 10MB and 5 old logs will be preserved. Here are instructions how to set options.</p><p>Open tigase-config.xml in you favorite text editor and search for string: "<span class="strong"><strong>logging</strong></span>". You should find section looking like this:</p><pre class="programlisting">&lt;node name="logging"&gt;
  &lt;map&gt;
    &lt;entry value="FINE" type="String" key=".level"/&gt;
    &lt;entry value="java.util.logging.ConsoleHandler+java.util.logging.FileHandler" type="String" key="handlers"/&gt;
    &lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.ConsoleHandler.formatter"/&gt;
    &lt;entry value="WARNING" type="String" key="java.util.logging.ConsoleHandler.level"/&gt;
    &lt;entry value="true" type="String" key="java.util.logging.FileHandler.append"/&gt;
    &lt;entry value="5" type="String" key="java.util.logging.FileHandler.count"/&gt;
    &lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.FileHandler.formatter"/&gt;
    &lt;entry value="ALL" type="String" key="java.util.logging.FileHandler.level"/&gt;
    &lt;entry value="100000" type="String" key="java.util.logging.FileHandler.limit"/&gt;
    &lt;entry value="logs%2Ftigase.log" type="String" key="java.util.logging.FileHandler.pattern"/&gt;
    &lt;entry value="true" type="String" key="tigase.useParentHandlers"/&gt;
  &lt;/map&gt;
&lt;/node&gt;</pre><p>Assuming we make this guide easy and strightforward let me show how this section should look like after modification. So you could just copy and paste it to your config file without going into details. After the configuration code I will briefly explain what each line means so you should be able to further adjust settings for your needs.</p><pre class="programlisting">&lt;node name="logging"&gt;
  &lt;map&gt;
    &lt;entry value="WARNING" type="String" key=".level"/&gt;
    &lt;entry value="java.util.logging.ConsoleHandler+java.util.logging.FileHandler" type="String" key="handlers"/&gt;
    &lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.ConsoleHandler.formatter"/&gt;
    &lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.FileHandler.formatter"/&gt;
    &lt;entry value="OFF" type="String" key="java.util.logging.ConsoleHandler.level"/&gt;
    &lt;entry value="true" type="String" key="java.util.logging.FileHandler.append"/&gt;
    &lt;entry value="5" type="String" key="java.util.logging.FileHandler.count"/&gt;
    &lt;entry value="ALL" type="String" key="java.util.logging.FileHandler.level"/&gt;
    &lt;entry value="10000000" type="String" key="java.util.logging.FileHandler.limit"/&gt;
    &lt;entry value="%2Fvar%2Flog%2Ftigase-server.log" type="String" key="java.util.logging.FileHandler.pattern"/&gt;
    &lt;entry value="true" type="String" key="tigase.useParentHandlers"/&gt;
  &lt;/map&gt;
&lt;/node&gt;</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_each_line_explained"></a>Each Line Explained:</h3></div></div></div><pre class="programlisting">&lt;entry value="WARNING" type="String" key=".level"/&gt;</pre><p>Effectively we set WARNING level for all possible logs for all possible components. So more detailed logging information will be discarded. All possible log levels are: OFF, SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST, ALL.</p><pre class="programlisting">&lt;entry value="java.util.logging.ConsoleHandler+java.util.logging.FileHandler" type="String" key="handlers"/&gt;</pre><p>We set 2 handlers for logging information: console and file handler. As we are going to turn off logging to console we could remove all configuration settings for console handler as well. It would simplify configuration file. I don&#8217;t recommend it though. If there are any problems with your installation switching console logging on might be very helpful and if you remove these settings from config file it may be difficult to bring them back. Hm&#8230;&#8203; maybe not with such excellent documentation&#8230;&#8203;. ;-)</p><pre class="programlisting">&lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.ConsoleHandler.formatter"/&gt;
&lt;entry value="tigase.util.LogFormatter" type="String" key="java.util.logging.FileHandler.formatter"/&gt;</pre><p>We set here log formatter for console and file handler. Standard Java handlers print each log message in 2 lines. Tigase formatter prints all logging info in 1 line which make it much easier to filter logs by log type, logging component or log level or whatever you wish. You can just use simple sed command and that&#8217;s it.</p><pre class="programlisting">&lt;entry value="OFF" type="String" key="java.util.logging.ConsoleHandler.level"/&gt;</pre><p>Here we just switch console handler off. To switch it on back set any different level from the list above.</p><pre class="programlisting">&lt;entry value="true" type="String" key="java.util.logging.FileHandler.append"/&gt;</pre><p>This settings is to controll whether we want to append logs into old log file or we want to create new log file (removing old content) each time server is restarted.</p><pre class="programlisting">&lt;entry value="5" type="String" key="java.util.logging.FileHandler.count"/&gt;</pre><p>Sets number of old log files to preserve to 5.</p><pre class="programlisting">&lt;entry value="ALL" type="String" key="java.util.logging.FileHandler.level"/&gt;</pre><p>This line sets the logging level for file handler. Here we set that we want all possible logs to be written to the file. The global level setting however says that only WARNING logs will be generated. So if you want to have more detailed logs you need to adjust global logging level.</p><pre class="programlisting">&lt;entry value="10000000" type="String" key="java.util.logging.FileHandler.limit"/&gt;</pre><p>Log file maximum size set to 10MB. After reaching this size the log file is closed and new file is created.</p><pre class="programlisting">&lt;entry value="%2Fvar%2Flog%2Ftigase-server.log" type="String" key="java.util.logging.FileHandler.pattern"/&gt;</pre><p>Location of the log file and file name: /var/log/tigase-server.log. Please note <span class="strong"><strong>%2F</strong></span> instead of \'<span class="strong"><strong>/</strong></span>' character.</p><pre class="programlisting">&lt;entry value="true" type="String" key="tigase.useParentHandlers"/&gt;</pre><p>This setting requires going into more details so it is explained in comprehensive configuration guide.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_hostnames.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_old_way_editing_configuration_file_manually.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_startup_file_for_tigase_sh_tigase_conf.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Hostnames&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;21.&nbsp;Startup File for tigase.sh - tigase.conf</td></tr></table></div></body></html>