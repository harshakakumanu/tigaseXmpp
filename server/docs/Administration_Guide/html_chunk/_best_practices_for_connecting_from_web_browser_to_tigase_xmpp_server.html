<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;87.&nbsp;Best Practices for Connecting From Web Browser to Tigase XMPP Server</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="_configuration_management_tool.html" title="Chapter&nbsp;86.&nbsp;Configuration Management Tool"><link rel="next" href="_websocket.html" title="WebSocket"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;87.&nbsp;Best Practices for Connecting From Web Browser to Tigase XMPP Server</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_configuration_management_tool.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_websocket.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_best_practices_for_connecting_from_web_browser_to_tigase_xmpp_server"></a>Chapter&nbsp;87.&nbsp;Best Practices for Connecting From Web Browser to Tigase XMPP Server</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_best_practices_for_connecting_from_web_browser_to_tigase_xmpp_server.html#_bosh">BOSH</a></span></dt><dd><dl><dt><span class="section"><a href="_best_practices_for_connecting_from_web_browser_to_tigase_xmpp_server.html#_tip_1_bosh_in_cluster_mode_without_load_balancer">Tip #1 - BOSH in Cluster Mode Without Load Balancer</a></span></dt></dl></dd><dt><span class="section"><a href="_websocket.html">WebSocket</a></span></dt><dd><dl><dt><span class="section"><a href="_websocket.html#_tip_1_encrypted_websocket_connection">Tip #1 - Encrypted WebSocket Connection</a></span></dt><dt><span class="section"><a href="_websocket.html#_tip_2_encrypted_websocket_connection_dealing_with_multiple_vhosts">Tip #2 - Encrypted WebSocket Connection - Dealing With Multiple VHosts</a></span></dt></dl></dd></dl></div><p>Andrzej Wojcik &lt;<a class="link" href="mailto:andrzejw@tigase.org" target="_top">andrzejw@tigase.org</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net" target="_top">http://tigase.net</a>
:Date: 2013-12-15 19:27</p><p>Currently we have 2 ways to connect to Tigase XMPP Server from web browsers:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">BOSH (Bidirectional-streams Over Synchronous HTTP)</li><li class="listitem">WebSocket (XMPP over WebSocket)</li></ol></div><p>You will find more informations about these ways for connecting to Tigase XMPP Server with some useful tips below.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_bosh"></a>BOSH</h2></div></div></div><p>BOSH protocol specified in <a class="link" href="http://xmpp.org/extensions/xep-0124.html" target="_top">XEP-0124</a> is one of first protocols defined to allow to establish XMPP connection to XMPP servers from web browsers. Due to that this protocol is widely supported and used by many deployments. It is also easy to use in single server mode. It&#8217;s enabled by default in Tigase XMPP Server and available at port 5280.</p><p>In clustered mode we can deploy it with load balancer deployed with guarantees that each BOSH connection from web browser will be forwarded to same Tigase XMPP Server instance. So in clustered mode if we have two XMPP server t1 and t2 which are hosting domain example.com we would need to have load balancer which will respond for HTTP request to domain example.com and forward all requests from same IP address to same node of a cluster (i.e. all request from 192.168.122.32 should be forwarded always to node t1.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_tip_1_bosh_in_cluster_mode_without_load_balancer"></a>Tip #1 - BOSH in Cluster Mode Without Load Balancer</h3></div></div></div><p>There is also a way to use BOSH without load balancer. In this case XMPP client needs to have more logic and knowledge about all available cluster nodes (with names of nodes which will identify particular cluster nodes from internet). Using this knowledge XMPP client should select one random node from list of available nodes and always establish BOSH connections to this particular node. In case if BOSH connection fails due to network connection issues XMPP client should randomly pick other node from list of rest of available nodes.</p><p><span class="emphasis"><em>Example:</em></span></p><p>We have servers t1.example.com and t2.example.com which are nodes of a cluster hosting domain example.com. Web client retrieves list of cluster nodes from web server and then when it needs to connect to XMPP server it picks random host from list of retrieved cluster nodes (i.e. t2.example.com) and tries to connect using BOSH protocol to host t2.example.com but it should send example.com as name of server to which it tries to connect (example.com should be value of to attribute of XMPP stream.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_configuration_management_tool.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_websocket.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;86.&nbsp;Configuration Management Tool&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;WebSocket</td></tr></table></div></body></html>