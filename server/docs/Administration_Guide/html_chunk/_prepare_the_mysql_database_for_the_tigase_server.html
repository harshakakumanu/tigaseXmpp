<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;29.&nbsp;Prepare the MySQL Database for the Tigase Server</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="_database_preparation.html" title="Chapter&nbsp;28.&nbsp;Database Preparation"><link rel="next" href="_configuring_from_the_linux_shell_command_line.html" title="Configuring From the Linux Shell Command Line"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;29.&nbsp;Prepare the MySQL Database for the Tigase Server</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_database_preparation.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_configuring_from_the_linux_shell_command_line.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_prepare_the_mysql_database_for_the_tigase_server"></a>Chapter&nbsp;29.&nbsp;Prepare the MySQL Database for the Tigase Server</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_prepare_the_mysql_database_for_the_tigase_server.html#_basic_setup">Basic Setup</a></span></dt><dd><dl><dt><span class="section"><a href="_prepare_the_mysql_database_for_the_tigase_server.html#_configuring_from_mysql_command_line_tool">Configuring from MySQL command line tool</a></span></dt></dl></dd><dt><span class="section"><a href="_configuring_from_the_linux_shell_command_line.html">Configuring From the Linux Shell Command Line</a></span></dt><dt><span class="section"><a href="_configuring_mysql_for_utf_8_support.html">Configuring MySQL for UTF-8 Support</a></span></dt><dt><span class="section"><a href="_other_mysql_setting_worth_considering.html">Other MySQL Setting Worth Considering</a></span></dt></dl></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net" target="_top">http://tigase.net</a>
:Date: 2010-04-06 21:18</p><p>This guide describes how to prepare the MySQL database for connecting the Tigase server to it.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_basic_setup"></a>Basic Setup</h2></div></div></div><p>The MySQL database can be prepared in many ways. Most of Linux distributions contain tools which allow you to go through all steps from the shell command line. To make sure, however it works on all platforms the same way I show first how to do it under MySQL command line client.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_configuring_from_mysql_command_line_tool"></a>Configuring from MySQL command line tool</h3></div></div></div><p>Run the MySQL command line client in either Linux or MS Windows environment and enter following instructions:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Create the database for the Tigase server:</p><pre class="programlisting">mysql&gt; create database tigasedb;</pre></li><li class="listitem"><p class="simpara">Add the tigase_user user and grant him access to the tigasedb database. Depending on how you plan to connect to the database (locally or over the network) use one of following commands or all if you are not sure:</p><p class="simpara"><span class="strong"><strong>Grant access to tigase_user connecting from any network address.</strong></span></p><pre class="programlisting">mysql&gt; GRANT ALL ON tigasedb.* TO tigase_user@'%'
            IDENTIFIED BY 'tigase_passwd';</pre><p class="simpara"><span class="strong"><strong>Grant access to tigase_user connecting from localhost.</strong></span></p><pre class="programlisting">mysql&gt; GRANT ALL ON tigasedb.* TO tigase_user@'localhost'
            IDENTIFIED BY 'tigase_passwd';</pre><p class="simpara"><span class="strong"><strong>Grant access to tigase_user connecting from local machine only.</strong></span></p><pre class="programlisting">mysql&gt; GRANT ALL ON tigasedb.* TO tigase_user
            IDENTIFIED BY 'tigase_passwd';</pre><p class="simpara">For the Tigase server version 4.x additional permissions must be granted for the database user:</p><pre class="programlisting">mysql&gt; GRANT SELECT, INSERT, UPDATE ON mysql.proc TO 'tigase_user'@'localhost';
mysql&gt; GRANT SELECT, INSERT, UPDATE ON mysql.proc TO 'tigase_user'@'%';
mysql&gt; GRANT SELECT, INSERT, UPDATE ON mysql.proc TO 'tigase_user';</pre><p class="simpara">And now you can update user permission changes in the database:</p><pre class="programlisting">mysql&gt; FLUSH PRIVILEGES;</pre></li><li class="listitem"><p class="simpara">Load <a class="link" href="http://server.tigase.org/browser/trunk/database/mysql-schema.sql" target="_top">database schema</a> to initialize the Tigase server database space.  First, switch to the database you have just created:</p><pre class="programlisting">mysql&gt; use tigasedb;</pre><p class="simpara">Assuming you run the mysql client in Linux from the Tigase installation directory. If you run the Tigase server all versions below 4.0:</p><pre class="programlisting">mysql&gt; source database/mysql-schema.sql;</pre><p class="simpara">For the Tigase server version 4.x you have to use proper schema version:</p><pre class="programlisting">mysql&gt; source database/mysql-schema-4.sql;</pre><p class="simpara">On Windows you have probably to enter the full path:</p><pre class="programlisting">mysql&gt; source c:/Program Files/Tigase/database/mysql-schema.sql;</pre><p class="simpara">The initialization schema file should be also available locally in database/ directory of your Tigase installation.</p></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_database_preparation.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_configuring_from_the_linux_shell_command_line.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;28.&nbsp;Database Preparation&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Configuring From the Linux Shell Command Line</td></tr></table></div></body></html>