<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;4.&nbsp;Tigase and Python</title><link rel="stylesheet" type="text/css" href="css/docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Tigase Administration Guide"><link rel="up" href="index.html" title="Tigase Administration Guide"><link rel="prev" href="_tigase_scripting_version_4_4_x_update_for_administrators.html" title="Chapter&nbsp;3.&nbsp;Tigase Scripting Version 4.4.x Update for Administrators"><link rel="next" href="_writing_python_scripts.html" title="Writing Python Scripts"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;4.&nbsp;Tigase and Python</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_tigase_scripting_version_4_4_x_update_for_administrators.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="_writing_python_scripts.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="_tigase_and_python"></a>Chapter&nbsp;4.&nbsp;Tigase and Python</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="_tigase_and_python.html#_installation">Installation</a></span></dt><dt><span class="section"><a href="_writing_python_scripts.html">Writing Python Scripts</a></span></dt></dl></div><p>Artur Hefczyc &lt;<a class="link" href="mailto:artur.hefczyc@tigase.net" target="_top">artur.hefczyc@tigase.net</a>&gt;
v2.0, June 2014: Reformatted for AsciiDoc.
:toc:
:numbered:
:website: <a class="link" href="http://tigase.net" target="_top">http://tigase.net</a>
:Date: 2010-01-06 20:22</p><p>Looking in the <a class="link" href="http://www.tigase.org/content/what-scripting-language-you-would-use-admin-commands-tigase" target="_top">last poll</a> it is clear that the most people are mainly interested in Python support in the Tigase server. As I mentioned in <a class="link" href="http://www.tigase.org/content/scripting-introduction-hello-world" target="_top">one of previous articles</a>, Tigase virtually supports any scripting language as long as there is <a class="link" href="http://www.jcp.org/en/jsr/detail?id=223" target="_top">JSR-223</a> support for that language.</p><p>This article describes how to get Python working as a scripting language for ad-hoc commands in the Tigase server. The first part is installation, and the second shows a few code examples with explanation of the differences between Python usage and some other languages.</p><p><span class="emphasis"><em>Please note, I am not a Python developer, and by no means this is Python development guide. In fact I know very little Python. All the code examples are used only to present the API available and there are certainly better ways to do it in the proper Python style. If you have any suggestions or have a better code examples I am happy to include them in the guide.</em></span></p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_installation"></a>Installation</h2></div></div></div><p>In short, the installation is extremely simple. Just copy the file attached to this article to your Tigase installation, to the libs/ directory. Restart the server and&#8230;&#8203; here it is. You can write and execute Python scripts inside the Tigase server right away.</p><p>And here it is, the full description.</p><p>In theory the Tigase offers scripting support defined in <a class="link" href="http://www.jcp.org/en/jsr/detail?id=223" target="_top">JSR-223</a>. You can use any language for which there is such support for JVM. This includes also stand-alone python implementations and the JSR-223 plugins acts just as a bridge. This, however, does not make much sense as you are not able to interact with JVM code (Tigase API). Therefore you need a language which is executed within JVM and can easily exchange data between the main application (Tigase server) and the script.</p><p><span class="inlinemediaobject"><img src="./images/lang-list-no-python-small.png" alt="lang-list-no-python-small"></span></p><p>The best way to go is to use Jython implementation. It works very well within JVM and what is very important it perfectly integrates with the Tigase server. I have tested the Tigase server with <span class="strong"><strong>Jython-2.2.1</strong></span> and can confirm it works fine. I, however, recommend version <span class="strong"><strong>Jython-2.5.1</strong></span> and all the examples are executed with this version installed. Please note, <span class="emphasis"><em>Jython-2.5.0</em></span> does not work at all. Both supported versions can be downloaded from the <a class="link" href="http://wiki.python.org/jython/DownloadInstructions" target="_top">Jython website</a>.</p><p><span class="strong"><strong>Version 2.5.1</strong></span> is a bit simpler to install. When you download and run the Jython installer, you have to find jython.jar file in the directory where you installed Jython. Just copy the file to the Tigase&#8217;s <span class="strong"><strong>libs/</strong></span> directory and all is ready to go. Please note, this is the same file as the one attached to this article for your convenience.</p><p><span class="strong"><strong>Version 2.2.1</strong></span> needs a little bit more work. The first part is the same. It is not, however enough to copy the jython.jar file. One more file is necessary for the Jython to work with the Tigase server. You have to install JSR-223 engine separately. JSR-223 engines binary file can be downloaded from <a class="link" href="https://scripting.dev.java.net/" target="_top">Java scripting project website</a>. The binary file has to be unpacked and jython-engine.jar file needs to be copied to the Tigase libs/ directory.</p><p>The best way to check if the Jython is installed correctly and support for Python is enabled is by trying to submit a new script to the Tigase server. Browser the server service discovery, select "<span class="emphasis"><em>Session manager</em></span>" component and run "<span class="emphasis"><em>Execute command</em></span>" function. A new window should show with a list of all available ad-hoc commands. Select "<span class="emphasis"><em>New command script</em></span>" item and click "<span class="emphasis"><em>Execute</em></span>". Ad-hoc command dialog windows should show up. One of the field is "<span class="emphasis"><em>Language</em></span>" with pull down list of available scripting languages. If "<span class="emphasis"><em>python</em></span>" is on the list it means everything is ok and support for Python is enabled.</p><p><span class="inlinemediaobject"><img src="./images/lang-list-with-python-small.png" alt="lang-list-with-python-small"></span></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_tigase_scripting_version_4_4_x_update_for_administrators.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="_writing_python_scripts.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Tigase Scripting Version 4.4.x Update for Administrators&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Writing Python Scripts</td></tr></table></div></body></html>